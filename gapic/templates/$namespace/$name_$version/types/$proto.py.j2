{% extends "_base.py.j2" %}

{% block content -%}
{% with e = proto.disambiguate('enum'), p = proto.disambiguate('proto') %}
{% if proto.enums|length -%}
import enum{% if e != 'enum' %} as {{ e }}{% endif %}

{% endif -%}
{% if proto.messages|length -%}
import proto{% if p != 'proto' %} as {{ p }}{% endif -%}
{% endif %}

{% for import_ in proto.python_modules -%}
{{ import_ }}
{% endfor %}


{% for enum in proto.top.enums.values() -%}
    {% include '$namespace/$name_$version/types/_enum.py.j2' with context %}
{% endfor %}

{% for message in proto.top.messages.values() -%}
    {% include "$namespace/$name_$version/types/_message.py.j2" with context %}
{% endfor %}

__all__ = (
    {%- for enum in proto.top.enums.values() %}
    '{{ enum.name }}',
    {%- endfor -%}
    {%- for message in proto.top.messages.values() %}
    '{{ message.name }}',
    {%- endfor %}
)
{% endwith %}{% endblock %}
